{"ast":null,"code":"import React,{useEffect,useMemo,useRef,useState}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const DEFAULT_CHARSET='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%&*()_+-=[]{};:\\'\",.<>/?';export default function DecryptedText(_ref){let{text,encryptedText,iterations=10,speed=35,charset=DEFAULT_CHARSET,className='decrypted-text',encryptedClassName='encrypted-text',parentClassName='decrypted-text-container',...props}=_ref;const[displayChars,setDisplayChars]=useState(()=>encryptedText.split(''));const animTokenRef=useRef(0);const hoveringRef=useRef(false);const diffIndices=useMemo(()=>{const diffs=[];const maxLen=Math.max(text.length,encryptedText.length);for(let i=0;i<maxLen;i++){if(text[i]!==encryptedText[i])diffs.push(i);}return diffs;},[text,encryptedText]);useEffect(()=>{animTokenRef.current++;setDisplayChars(encryptedText.split(''));},[text,encryptedText]);const randomChar=()=>charset[Math.floor(Math.random()*charset.length)];const runForward=async token=>{for(const idx of diffIndices){if(animTokenRef.current!==token||!hoveringRef.current)return;for(let j=0;j<iterations;j++){if(animTokenRef.current!==token||!hoveringRef.current)return;setDisplayChars(prev=>{const cp=[...prev];cp[idx]=randomChar();return cp;});await new Promise(r=>setTimeout(r,speed));}if(animTokenRef.current!==token||!hoveringRef.current)return;setDisplayChars(prev=>{var _text$idx;const cp=[...prev];cp[idx]=(_text$idx=text[idx])!==null&&_text$idx!==void 0?_text$idx:'';return cp;});await new Promise(r=>setTimeout(r,speed));}};const runReverse=async token=>{const rev=[...diffIndices].reverse();for(const idx of rev){if(animTokenRef.current!==token)return;for(let j=0;j<iterations;j++){if(animTokenRef.current!==token)return;setDisplayChars(prev=>{const cp=[...prev];cp[idx]=randomChar();return cp;});await new Promise(r=>setTimeout(r,speed));}if(animTokenRef.current!==token)return;setDisplayChars(prev=>{var _encryptedText$idx;const cp=[...prev];cp[idx]=(_encryptedText$idx=encryptedText[idx])!==null&&_encryptedText$idx!==void 0?_encryptedText$idx:'';return cp;});await new Promise(r=>setTimeout(r,speed));}};const handleEnter=()=>{hoveringRef.current=true;const token=++animTokenRef.current;runForward(token);};const handleLeave=()=>{hoveringRef.current=false;const token=++animTokenRef.current;runReverse(token);};return/*#__PURE__*/_jsxs(\"span\",{className:parentClassName,onMouseEnter:handleEnter,onMouseLeave:handleLeave,...props,style:{cursor:'none',display:'inline-block'},children:[/*#__PURE__*/_jsx(\"span\",{style:{position:'absolute',width:1,height:1,margin:'-1px',padding:0,overflow:'hidden',clip:'rect(0,0,0,0)'},children:displayChars.join('')}),/*#__PURE__*/_jsx(\"span\",{\"aria-hidden\":\"true\",children:displayChars.map((ch,i)=>{const isFinal=ch===text[i];const isEnc=ch===encryptedText[i];const cls=isFinal?className:encryptedClassName;return/*#__PURE__*/_jsx(\"span\",{className:cls,children:ch},i);})})]});}","map":{"version":3,"names":["React","useEffect","useMemo","useRef","useState","jsx","_jsx","jsxs","_jsxs","DEFAULT_CHARSET","DecryptedText","_ref","text","encryptedText","iterations","speed","charset","className","encryptedClassName","parentClassName","props","displayChars","setDisplayChars","split","animTokenRef","hoveringRef","diffIndices","diffs","maxLen","Math","max","length","i","push","current","randomChar","floor","random","runForward","token","idx","j","prev","cp","Promise","r","setTimeout","_text$idx","runReverse","rev","reverse","_encryptedText$idx","handleEnter","handleLeave","onMouseEnter","onMouseLeave","style","cursor","display","children","position","width","height","margin","padding","overflow","clip","join","map","ch","isFinal","isEnc","cls"],"sources":["/home/johnlemon/portfolio/src/components/extra_functions/DecryptedText.jsx"],"sourcesContent":["import React, { useEffect, useMemo, useRef, useState } from 'react';\n\nconst DEFAULT_CHARSET =\n  'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%&*()_+-=[]{};:\\'\",.<>/?';\n\nexport default function DecryptedText({\n  text,\n  encryptedText,\n  iterations = 10,\n  speed = 35,\n  charset = DEFAULT_CHARSET,\n  className = 'decrypted-text',\n  encryptedClassName = 'encrypted-text',\n  parentClassName = 'decrypted-text-container',\n  ...props\n}) {\n  const [displayChars, setDisplayChars] = useState(() =>\n    encryptedText.split('')\n  );\n\n  const animTokenRef = useRef(0);\n  const hoveringRef = useRef(false);\n\n  const diffIndices = useMemo(() => {\n    const diffs = [];\n    const maxLen = Math.max(text.length, encryptedText.length);\n    for (let i = 0; i < maxLen; i++) {\n      if (text[i] !== encryptedText[i]) diffs.push(i);\n    }\n    return diffs;\n  }, [text, encryptedText]);\n\n  useEffect(() => {\n    animTokenRef.current++;\n    setDisplayChars(encryptedText.split(''));\n  }, [text, encryptedText]);\n\n  const randomChar = () =>\n    charset[Math.floor(Math.random() * charset.length)];\n\n  const runForward = async (token) => {\n    for (const idx of diffIndices) {\n      if (animTokenRef.current !== token || !hoveringRef.current) return;\n\n      for (let j = 0; j < iterations; j++) {\n        if (animTokenRef.current !== token || !hoveringRef.current) return;\n        setDisplayChars((prev) => {\n          const cp = [...prev];\n          cp[idx] = randomChar();\n          return cp;\n        });\n        await new Promise((r) => setTimeout(r, speed));\n      }\n\n      if (animTokenRef.current !== token || !hoveringRef.current) return;\n      setDisplayChars((prev) => {\n        const cp = [...prev];\n        cp[idx] = text[idx] ?? '';\n        return cp;\n      });\n      await new Promise((r) => setTimeout(r, speed));\n    }\n  };\n\n  const runReverse = async (token) => {\n    const rev = [...diffIndices].reverse();\n\n    for (const idx of rev) {\n      if (animTokenRef.current !== token) return;\n\n      for (let j = 0; j < iterations; j++) {\n        if (animTokenRef.current !== token) return;\n        setDisplayChars((prev) => {\n          const cp = [...prev];\n          cp[idx] = randomChar();\n          return cp;\n        });\n        await new Promise((r) => setTimeout(r, speed));\n      }\n\n      if (animTokenRef.current !== token) return;\n      setDisplayChars((prev) => {\n        const cp = [...prev];\n        cp[idx] = encryptedText[idx] ?? '';\n        return cp;\n      });\n      await new Promise((r) => setTimeout(r, speed));\n    }\n  };\n\n  const handleEnter = () => {\n    hoveringRef.current = true;\n    const token = ++animTokenRef.current;\n    runForward(token);\n  };\n\n  const handleLeave = () => {\n    hoveringRef.current = false;\n    const token = ++animTokenRef.current;\n    runReverse(token);\n  };\n\n  return (\n    <span\n      className={parentClassName}\n      onMouseEnter={handleEnter}\n      onMouseLeave={handleLeave}\n      {...props}\n      style={{ cursor: 'none', display: 'inline-block' }}\n    >\n      <span\n        style={{\n          position: 'absolute',\n          width: 1,\n          height: 1,\n          margin: '-1px',\n          padding: 0,\n          overflow: 'hidden',\n          clip: 'rect(0,0,0,0)'\n        }}\n      >\n        {displayChars.join('')}\n      </span>\n\n      <span aria-hidden=\"true\">\n        {displayChars.map((ch, i) => {\n          const isFinal = ch === text[i];\n          const isEnc = ch === encryptedText[i];\n          const cls = isFinal ? className : encryptedClassName;\n          return (\n            <span key={i} className={cls}>\n              {ch}\n            </span>\n          );\n        })}\n      </span>\n    </span>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}